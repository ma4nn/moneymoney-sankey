# Interactive Sankey Charts for MoneyMoney

![Build Status](https://github.com/ma4nn/moneymoney-sankey/actions/workflows/build-lua-script.yml/badge.svg) [![Join My Discord](https://dev-investor.de/wp-content/uploads/join-discord.svg)](https://dev-investor.de/chat)

This is an extension for the great [MoneyMoney app](https://moneymoney-app.com/) to export an interactive HTML [Sankey Chart](https://de.wikipedia.org/wiki/Sankey-Diagramm) from the transaction categories.

[Demo](https://ma4nn.github.io/moneymoney-sankey/)

[![Sankey Sample Chart](https://ma4nn.github.io/moneymoney-sankey/sample.png)](https://ma4nn.github.io/moneymoney-sankey/)

## Highlights

- Hide categories by click
- Add configurable budgets per each category
- Add threshold value for chart paths
- Automatically save configuration in browser
- Export chart data to [SankeyMATIC](https://sankeymatic.com)

## Installing

This MoneyMoney extension can be installed as follows:
1. Download the file `SankeyChart.lua` from the [latest release](https://github.com/ma4nn/moneymoney-sankey/releases/latest/download/SankeyChart.lua)
2. In the MoneyMoney app open menu _Help ‚Üí Show database in Finder_ and copy the downloaded file into the sub-folder `Extensions/`.

## Usage üí°

The Sankey Chart can be generated by selecting or filtering the appropriate transactions or accounts in MoneyMoney and choose menu _Account ‚Üí Export Transactions_.  
Afterwards select "Sankey-Chart (.html)" as the export format and open the generated file in your browser of choice.

For more information see also [my blog post](https://dev-investor.de/finanz-apps/money-money/kategorien-budgets-nutzen/).

## Privacy

Everything runs in your browser, no internet connection is required.  
The generated HTML file enforces a very strict Content-Security-Policy and does **not allow** to load any external scripts or resources.

## Developing ‚öíÔ∏è

```
make && make test
```

The compiled MoneyMoney extension can then be found in `dist/SankeyChart.lua` and installed with `make install`.

## Compatibility

- Tested with MoneyMoney 2.4.x
- [Modern browser](https://www.w3schools.com/js/js_2017.asp) is required

### Known Limitations üöß
- Only 1 currency is supported (the currency of the account is taken, other currencies are ignored)
- The report is available in German language only

## Issues
In case you are experiencing any issues please try to reproduce it with an MoneyMoney offline account and provide the exported (anonymized) HTML file.  
At least open the [Developer Tools](https://developer.chrome.com/docs/devtools/open?hl=de) of your browser and provide the complete output of the console into the ticket description.

## Licensing

This repository is published under the [MIT license](./LICENSE). It uses the great Highcharts library, please obtain a valid license [on their website](https://shop.highcharts.com/).